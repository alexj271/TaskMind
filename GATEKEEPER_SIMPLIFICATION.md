# Gatekeeper Worker - –£–ø—Ä–æ—â–µ–Ω–∏–µ –¥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### ‚ùå –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á** - —Ç–µ–ø–µ—Ä—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ Chat Worker
- **–ü–∞—Ä—Å–∏–Ω–≥ –∑–∞–¥–∞—á —Å AI** - –Ω–µ –Ω—É–∂–Ω–æ –≤ —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–µ  
- **–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π** - –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–∞–∑–ª–∏—á–∞—Ç—å —Ç–∏–ø—ã
- **–°–ª–æ–∂–Ω—ã–µ AI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã** –¥–ª—è task creation

### ‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–π–º–∑–æ–Ω—ã** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
- **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–∞–π–º–∑–æ–Ω—ã** —Å –ø–æ–º–æ—â—å—é AI –∏–∑ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞
- **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è** –≤ Chat Worker –ø–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Redis —Ñ–ª–∞–≥–∞–º–∏** –¥–ª—è —Ä–µ–∂–∏–º–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç–∞–π–º–∑–æ–Ω—ã

## –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Webhook Message ‚Üí Gatekeeper ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–π–º–∑–æ–Ω—ã
                           ‚îú‚îÄ‚îÄ ‚ùå –ù–µ—Ç —Ç–∞–π–º–∑–æ–Ω—ã ‚Üí –ó–∞–ø—Ä–æ—Å —É—Å—Ç–∞–Ω–æ–≤–∫–∏
                           ‚îú‚îÄ‚îÄ üîß –†–µ–∂–∏–º —É—Å—Ç–∞–Ω–æ–≤–∫–∏ ‚Üí AI –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ ‚Üí –£—Å—Ç–∞–Ω–æ–≤–∫–∞
                           ‚îî‚îÄ‚îÄ ‚úÖ –ï—Å—Ç—å —Ç–∞–π–º–∑–æ–Ω–∞ ‚Üí Chat Worker (–≤—Å–µ –∑–∞–¥–∞—á–∏)
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —É–ø—Ä–æ—â–µ–Ω–∏—è

1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**: Gatekeeper = –¥–æ—Å—Ç—É–ø, Chat = —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
2. **–ü—Ä–æ—â–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å**: –ú–µ–Ω—å—à–µ —É—Å–ª–æ–≤–∏–π –∏ –ø—É—Ç–µ–π –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è  
3. **–õ–µ–≥—á–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å**: –û–¥–∏–Ω —á–µ—Ç–∫–∏–π –ø—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã
4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: Chat Worker –º–æ–∂–µ—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ

## –§–∞–π–ª—ã

### –ò–∑–º–µ–Ω–µ–Ω—ã
- `app/workers/gatekeeper/tasks.py` - —É–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –¥–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∞–π–º–∑–æ–Ω—ã
- `app/workers/gatekeeper/models.py` - —É–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏
- `app/workers/gatekeeper/prompts/timezone_parse.md` - —É–ª—É—á—à–µ–Ω –ø—Ä–æ–º–ø—Ç
- `app/workers/gatekeeper/tests/test_process_webhook_message.py` - –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã

### –î–æ–±–∞–≤–ª–µ–Ω—ã
- `app/workers/gatekeeper/README.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏

### –ü–µ—Ä–µ–º–µ—â–µ–Ω—ã
- `test_parse_prompt.py` ‚Üí `_old_test_parse_prompt.py` (–Ω–µ –∞–∫—Ç—É–∞–ª–µ–Ω)

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **5/5 —Ç–µ—Å—Ç–æ–≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç**  
‚úÖ **Gatekeeper —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª–µ –¥–æ—Å—Ç—É–ø–∞**  
‚úÖ **–í—Å–µ –∑–∞–¥–∞—á–∏ —Ç–µ–ø–µ—Ä—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ Chat Worker**  

–°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–ª–∞ –ø—Ä–æ—â–µ, –Ω–∞–¥–µ–∂–Ω–µ–µ –∏ –ª–µ–≥—á–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫–µ!